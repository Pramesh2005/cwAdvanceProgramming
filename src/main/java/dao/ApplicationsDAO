package dao;

import java.sql.*;
import java.util.*;
import model.Application;

public class ApplicationDAO {
    // Existing methods remain unchanged...

    public int getTotalApplications() throws SQLException {
        String sql = "SELECT COUNT(*) FROM application";
        try (Connection conn = DBUtil.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql);
             ResultSet rs = stmt.executeQuery()) {
            if (rs.next()) {
                return rs.getInt(1);
            }
        }
        return 0; // Return 0 if no results or an error occurs
    }

    // Add method to list all applications for admin
    public List<Application> listAllApplications() throws SQLException {
        String sql = "SELECT * FROM application";
        try (Connection c = DBUtil.getConnection();
             PreparedStatement p = c.prepareStatement(sql);
             ResultSet r = p.executeQuery()) {
            List<Application> applications = new ArrayList<>();
            while (r.next()) {
                Application a = new Application();
                a.setApplicationId(r.getInt("application_id"));
                a.setUserId(r.getInt("user_id"));
                a.setScholarshipId(r.getInt("scholarship_id"));
                a.setAppliedAt(r.getTimestamp("applied_at"));
                a.setStatus(r.getString("status"));
                a.setRemarks(r.getString("remarks"));
                applications.add(a);
            }
            return applications;
        }
    }
}